(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{5024:function(){},1031:function(e,t,a){Promise.resolve().then(a.bind(a,2833)),Promise.resolve().then(a.t.bind(a,3699,23)),Promise.resolve().then(a.bind(a,7878))},2833:function(e,t,a){"use strict";a.r(t),a.d(t,{Body:function(){return T}});var s=a(7437),n=a(8216),l=a(2265),i=a(6792);let r=new i.zt(i.Zc.TESTNET);function c(e){let{selectedAction:t,setSelectedAction:a,setPet:i,pet:c}=e,[d,h]=(0,l.useState)(!1),{account:u,network:p,signAndSubmitTransaction:m}=(0,n.Os)(),f=async()=>{if(!u||!p)return;h(!0);let e={type:"entry_function_payload",function:"".concat("0x29f775534bab6694b9645b089c050358fdc5826a9646fb29162bdb54904e27bc","::main::change_health_points"),type_arguments:[],arguments:[u.address,"2"]};try{let t=await m(e);await r.waitForTransaction(t.hash),i(e=>e?{...e,health_points:e.health_points+Number("2")>Number("10")?Number("10"):e.health_points+Number("2")}:e)}catch(e){console.error(e)}finally{h(!1)}},x=async()=>{if(!u||!p)return;h(!0);let e={type:"entry_function_payload",function:"".concat("0x29f775534bab6694b9645b089c050358fdc5826a9646fb29162bdb54904e27bc","::main::change_happiness"),type_arguments:[],arguments:[u.address,"2"]};try{let t=await m(e);await r.waitForTransaction(t.hash),i(e=>e?{...e,happiness:e.happiness+Number("2")>Number("10")?Number("10"):e.happiness+Number("2")}:e)}catch(e){console.error(e)}finally{h(!1)}},b="feed"===t&&c.health_points===Number("10"),y="play"===t&&c.happiness===Number("10");return(0,s.jsxs)("div",{className:"nes-container with-title flex-1 bg-white",children:[(0,s.jsx)("p",{className:"title",children:"Actions"}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 justify-between h-full",children:[(0,s.jsxs)("div",{className:"flex flex-col flex-shrink-0 gap-2",style:{borderBottom:"1px solid #D1D5DB"},children:[(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"radio",className:"nes-radio",name:"action",checked:"feed"===t,onChange:()=>a("feed")}),(0,s.jsx)("span",{children:"Feed"})]}),(0,s.jsxs)("label",{children:[(0,s.jsx)("input",{type:"radio",className:"nes-radio",name:"action",checked:"play"===t,onChange:()=>a("play")}),(0,s.jsx)("span",{children:"Play"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-4 justify-between",children:[(0,s.jsx)("p",{children:o[t]}),(0,s.jsx)("button",{type:"button",className:"nes-btn is-success ".concat(b||y?"is-disabled":""),onClick:()=>{switch(t){case"feed":f();break;case"play":x()}},disabled:d||b||y,children:d?"Processing...":"Start"})]})]})]})}let o={feed:"Feeding your pet will boost its HP and Happiness...",play:"Playing with your pet will boost its Happiness, but deplete some of its HP...",customize:"Customize your pet to give it a fresh new look and make it truly yours..."};var d=a(9150);function h(e){return Array.from({length:e},(e,t)=>t)}function u(e){let{totalHealth:t,currentHealth:a,icon:n}=e;return(0,s.jsxs)("div",{className:"flex flex-wrap gap-1",children:[h(Math.floor(a/2)).map(e=>(0,s.jsx)("i",{className:"nes-icon ".concat(n)},e)),h(a%2).map(e=>(0,s.jsx)("i",{className:"nes-icon is-half ".concat(n)},e)),h(Math.floor((t-a)/2)).map(e=>(0,s.jsx)("i",{className:"nes-icon is-empty ".concat(n)},e))]})}let p=new i.zt(i.Zc.TESTNET);function m(e){let{pet:t,setPet:a}=e,[i,r]=(0,l.useState)(t.name),[c,o]=(0,l.useState)(!1),{account:h,network:m,signAndSubmitTransaction:f}=(0,n.Os)(),x=i!==t.name,b=async()=>{if(!h||!m)return;o(!0);let e={type:"entry_function_payload",function:"".concat("0x29f775534bab6694b9645b089c050358fdc5826a9646fb29162bdb54904e27bc","::main::set_name"),type_arguments:[],arguments:[h.address,i]};try{let t=await f(e);await p.waitForTransaction(t.hash),a(e=>e?{...e,name:i}:e)}catch(e){console.error(e)}finally{o(!1)}};return(0,s.jsxs)("div",{className:"flex flex-row gap-4 ml-4",children:[(0,s.jsx)("div",{className:"flex flex-col w-6/12",children:(0,s.jsxs)("div",{className:"nes-field",children:[(0,s.jsx)("label",{htmlFor:"name_field",children:"Name"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("input",{type:"text",id:"name_field",className:"nes-input",value:i,onChange:e=>r(e.currentTarget.value)}),(0,s.jsx)("button",{className:"absolute right-4 top-1/2 -translate-y-1/2 nes-pointer disabled:cursor-not-allowed text-sky-500 disabled:text-gray-400",disabled:!x,onClick:b,children:(0,s.jsx)(d.gg_,{className:" h-8 w-8 drop-shadow-sm"})})]})]})}),(0,s.jsxs)("div",{className:"flex flex-col w-6/12",children:[(0,s.jsx)("label",{children:"HP"}),(0,s.jsx)(u,{totalHealth:10,currentHealth:t.health_points,icon:"heart"}),(0,s.jsx)("label",{children:"Happiness"}),(0,s.jsx)(u,{totalHealth:10,currentHealth:t.happiness,icon:"star"})]})]})}function f(e){let t=x+e.petParts.body,a=x+e.petParts.ears,n=x+e.petParts.face,l="absolute top-0 left-0 w-full h-full object-contain",i="play"===e.selectedAction?"animate-hop":"animate-wiggle";return(0,s.jsx)("div",{className:"h-56 w-56 bg-[hsl(104,40%,75%)] border-double border-8 border-black p-2 relative",children:(0,s.jsxs)("div",{className:"relative h-full w-full ".concat(i),children:[(0,s.jsx)("img",{src:x+"head.png",className:l,alt:"pet head"}),(0,s.jsx)("img",{src:t,className:l,alt:"pet body"}),(0,s.jsx)("img",{src:a,className:l,alt:"pet ears"}),(0,s.jsx)("img",{src:n,className:l,alt:"pet face"})]})})}let x="/pet-parts/",b=["body1.png","body2.png","body3.png","body4.png","body5.png"],y=["ear1.png","ear2.png","ear3.png","ear4.png","ear5.png","ear6.png"],g=["face1.png","face2.png","face3.png","face4.png"];function j(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:25,[a,s]=(0,l.useState)("\xa0");return(0,l.useEffect)(()=>{s("\xa0")},[e]),(0,l.useEffect)(()=>{if(a===e)return;let n=window.setInterval(()=>{s(t=>e.slice(0,t.length+1))},t);return()=>{window.clearInterval(n)}},[e,t,a]),a}function w(e){let{pet:t}=e,a=t.happiness<6,n=t.health_points<6,l=t.happiness<3,i=t.health_points<3,r=0===t.happiness,c=0===t.health_points,o="".concat(t.name," is doing great! \uD83D\uDE04");a&&(o="".concat(t.name," is getting a little lonely \uD83D\uDE41. You should consider playing with them...")),n&&(o="".concat(t.name," is starting to get hungry \uD83D\uDE15. You should consider feeding them...")),l&&(o="".concat(t.name," is really sad \uD83D\uDE14. You should play with them as soon as you can...")),i&&(o="".concat(t.name," is really hungry \uD83D\uDE16. You should feed them as soon as you can...")),r&&(o="".concat(t.name," has never been sadder \uD83D\uDE22. Play with them right now!")),c&&(o="".concat(t.name," is literally starving \uD83D\uDE25. Feed them right now!")),r&&c&&(o="".concat(t.name," has died. RIP. \uD83E\uDEA6"));let d=j(o);return(0,s.jsxs)("div",{className:"nes-container is-dark with-title",children:[(0,s.jsx)("p",{className:"title",children:"Summary"}),(0,s.jsx)("p",{children:d})]})}function N(e){let{pet:t,setPet:a}=e,[n,i]=(0,l.useState)("feed");return(0,l.useEffect)(()=>{let e=window.setInterval(()=>(a(e=>e?{...e,health_points:Math.max(0,e.health_points-1)}:e),()=>clearInterval(e)),6e4)},[]),(0,l.useEffect)(()=>{let e=window.setInterval(()=>(a(e=>e?{...e,happiness:Math.max(0,e.happiness-1)}:e),()=>clearInterval(e)),6e4)},[]),(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-4 justify-center",children:[(0,s.jsx)(f,{pet:t,selectedAction:n,petParts:{body:b[t.parts[0]],ears:y[t.parts[1]],face:g[t.parts[2]]}}),(0,s.jsx)(m,{pet:t,setPet:a}),(0,s.jsx)(c,{selectedAction:n,setSelectedAction:i,setPet:a,pet:t})]}),(0,s.jsx)(w,{pet:t})]})}var v=a(9348);let _=new i.zt(i.Zc.TESTNET),k={name:"Unknown",health_points:0,happiness:0,parts:[]};function D(e){let{fetchPet:t}=e,[a,i]=(0,l.useState)(""),[r,c]=(0,l.useState)([0,0,0]),[o,d]=(0,l.useState)("feed"),[h,u]=(0,l.useState)(!1),{account:p,network:m,signAndSubmitTransaction:x}=(0,n.Os)(),j=async()=>{if(p&&m){u(!0);try{let e=await x({type:"entry_function_payload",function:"".concat("0x29f775534bab6694b9645b089c050358fdc5826a9646fb29162bdb54904e27bc","::main::create_aptogotchi"),type_arguments:[],arguments:[a,r]});await _.waitForTransaction(e.hash)}catch(e){console.error(e)}finally{t(),u(!1)}}};return(0,s.jsxs)("div",{className:"flex flex-col gap-8 max-w-md self-center pt-8",children:[(0,s.jsx)("h2",{className:"text-xl pb-4",children:"Create your pet!"}),(0,s.jsxs)("div",{className:"nes-field",children:[(0,s.jsx)("label",{htmlFor:"name_field",children:"Name"}),(0,s.jsx)("input",{type:"text",id:"name_field",className:"nes-input",value:a,onChange:e=>i(e.currentTarget.value)})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-6 self-center",children:[function(e){let[t,a,n]=e;return(0,s.jsx)("div",{onClick:()=>c([t,a,n]),children:(0,s.jsx)(f,{pet:k,selectedAction:o,petParts:{body:b[t],ears:y[a],face:g[n]}})})}(r),(0,s.jsxs)("button",{type:"button",className:"nes-btn flex flex-row justify-center items-center",onClick:()=>{let e=[Math.floor(Math.random()*Number("5")),Math.floor(Math.random()*Number("6")),Math.floor(Math.random()*Number("4"))];c(e);let t=["feed","play"],a=t[Math.floor(Math.random()*t.length)];d(a)},children:[(0,s.jsx)("h2",{children:"Shuffle"}),(0,s.jsx)(v.QD$,{className:"h-8 w-8 drop-shadow-sm ml-2"})]})]}),(0,s.jsx)("button",{type:"button",className:"nes-btn ".concat(a?"is-success":"is-disabled"),disabled:!a||h,onClick:j,children:h?"Loading...":"Mint Pet"})]})}let E=new i.zt(i.Zc.TESTNET);function S(){let[e,t]=(0,l.useState)(),{account:a,network:i}=(0,n.Os)(),r=(0,l.useCallback)(async()=>{if(!(null==a?void 0:a.address))return;let e={function:"".concat("0x29f775534bab6694b9645b089c050358fdc5826a9646fb29162bdb54904e27bc","::main::get_aptogotchi"),type_arguments:[],arguments:[a.address]},s=await E.view(e);console.log("GET APTOGOTCHI: ",s),JSON.stringify(s)!==JSON.stringify(["","0","0","0","0x"])&&t({name:s[0],health_points:parseInt(s[2]),happiness:parseInt(s[3]),parts:s[4].split("0").slice(2).map(Number)})},[null==a?void 0:a.address]);return(0,l.useEffect)(()=>{(null==a?void 0:a.address)&&i&&r()},[null==a?void 0:a.address,r,i]),(0,s.jsx)("div",{className:"flex flex-col gap-3 p-3",children:e?(0,s.jsx)(N,{pet:e,setPet:t}):(0,s.jsx)(D,{fetchPet:r})})}let P={name:"Unknown",health_points:0,happiness:0,parts:[]};function M(){let[e,t]=(0,l.useState)([0,0,0]),[a,n]=(0,l.useState)("feed"),i=j("Welcome to Aptogotchi! Once you connect your wallet, you'll be able to mint your new on-chain pet. Once minted, you'll be able to feed, play with, and customize your new best friend!");return(0,s.jsxs)("div",{className:"flex flex-col gap-6 p-6",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6 self-center",children:[(0,s.jsx)(f,{pet:P,selectedAction:a,petParts:{body:b[e[0]],ears:y[e[1]],face:g[e[2]]}}),(0,s.jsxs)("button",{type:"button",className:"nes-btn flex flex-row justify-center items-center",onClick:()=>{let e=[Math.floor(Math.random()*Number("5")),Math.floor(Math.random()*Number("6")),Math.floor(Math.random()*Number("4"))];t(e);let a=["feed","play"],s=a[Math.floor(Math.random()*a.length)];n(s)},children:[(0,s.jsx)("h2",{children:"Shuffle"}),(0,s.jsx)(v.QD$,{className:"h-8 w-8 drop-shadow-sm ml-2"})]})]}),(0,s.jsxs)("div",{className:"nes-container is-dark with-title",children:[(0,s.jsx)("p",{className:"title",children:"Welcome"}),(0,s.jsx)("p",{children:i})]})]})}function T(){let{connected:e}=(0,n.Os)();return e?(0,s.jsx)(S,{}):(0,s.jsx)(M,{})}},7878:function(e,t,a){"use strict";a.r(t),a.d(t,{WalletButtons:function(){return o}});var s=a(7437),n=a(8216),l=a(7042),i=a(3986);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,i.m)((0,l.W)(t))}let c="nes-btn is-primary",o=()=>{let{wallets:e,connected:t,disconnect:a,isLoading:l}=(0,n.Os)();return t?(0,s.jsxs)("div",{className:"flex flex-row",children:[(0,s.jsxs)("select",{id:"Network",className:"bg-gray-50 text-sm rounded-lg block p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white",style:{marginRight:"15px"},children:[(0,s.jsx)("option",{value:"Devnet",children:"Devnet"}),(0,s.jsx)("option",{selected:!0,value:"Testnet",children:"Testnet"}),(0,s.jsx)("option",{value:"Mainnet",children:"Mainnet"})]}),(0,s.jsx)("div",{className:r(c,"hover:bg-blue-700 btn-small"),onClick:a,children:"Disconnect"})]}):l||!e[0]?(0,s.jsx)("div",{className:r(c,"opacity-50 cursor-not-allowed"),children:"Loading..."}):(0,s.jsx)(d,{wallet:e[0]})},d=e=>{let{wallet:t}=e,{connect:a}=(0,n.Os)(),l=t.readyState===n.i1.Installed||t.readyState===n.i1.Loadable,i=t.deeplinkProvider,o=async e=>{try{await a(e)}catch(e){console.warn(e),window.alert("Failed to connect wallet")}};return!l&&(0,n.cX)()?i?(0,s.jsx)("button",{className:r(c,"hover:bg-blue-700"),disabled:!1,onClick:()=>o(t.name),style:{maxWidth:"300px"},children:"Connect Wallet"},t.name):(0,s.jsx)("button",{className:r(c,"opacity-50 cursor-not-allowed"),disabled:!0,style:{maxWidth:"300px"},children:"Connect Wallet - Desktop Only"},t.name):(0,s.jsx)("button",{className:r(c,l?"hover:bg-blue-700":"opacity-50 cursor-not-allowed"),disabled:!l,onClick:()=>o(t.name),style:{maxWidth:"300px"},children:"Connect Wallet"},t.name)}}},function(e){e.O(0,[664,169,712,546,609,971,596,744],function(){return e(e.s=1031)}),_N_E=e.O()}]);